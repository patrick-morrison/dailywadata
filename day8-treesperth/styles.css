/**
 * Trees Perth - Radar Map Styles (Material Design + Mobile Only)
 */

/* Reset */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    -webkit-tap-highlight-color: transparent;
}

body {
    font-family: 'Roboto', sans-serif;
    overflow: hidden;
    background: #f5f5f0;
    color: #1a1a1a;
}

/* Desktop Blocker */
#desktop-blocker {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: #f5f5f0;
    z-index: 9999;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 20px;
}

#desktop-blocker h1 {
    font-size: 3rem;
    font-weight: 700;
    margin-bottom: 20px;
}

#desktop-blocker p {
    font-size: 1.2rem;
    color: #555;
    line-height: 1.6;
}

@media (min-width: 768px) {
    #desktop-blocker {
        display: flex;
    }

    #app {
        display: none;
    }
}

/* App Container */
#app {
    position: relative;
    width: 100%;
    height: 100vh;
}

/* Map Container */
#map {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 65vh;
    /* Leave space for 35vh shelf */
    z-index: 0;
    background: #f5f5f0;
    /* Ensure background shows */
}

/* Map Canvas Fade (High Contrast / Technical feel) */
.maplibregl-canvas {
    opacity: 0.8;
    filter: saturate(0) contrast(1.1) brightness(1.1);
}

/* UI Layer */
.ui-layer {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 10;
    pointer-events: none;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

/* Top Bar */
.top-bar {
    padding: 24px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    pointer-events: auto;
}

.back-btn {
    font-size: 1.5rem;
    color: #000;
    text-decoration: none;
    opacity: 0.6;
    transition: opacity 0.2s;
    font-weight: 700;
}

.radar-status {
    font-family: 'Roboto', sans-serif;
    font-weight: 700;
    font-size: 1rem;
    color: #1a1a1a;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.icon-btn {
    background: #fff;
    border: 1px solid rgba(0, 0, 0, 0.1);
    width: 48px;
    height: 48px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    transition: all 0.2s;
    color: #333;
}

.icon-btn.active {
    background: #1a1a1a;
    color: #fff;
    border-color: #1a1a1a;
}

/* Bottom Shelf */
.shelf-container {
    position: relative;
    height: 35vh;
    background: #e8e6e1;
    /* Deep Warm Taupe / Off-White */
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    pointer-events: auto;
    display: flex;
    flex-direction: column;
    box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.05);
    overflow: visible;
    /* Ensure progress bar is visible outside */
    z-index: 1000;
}

.shelf-scroll {
    flex: 1;
    overflow-y: auto;
    padding: 0;
}

/* Tree Item in List */
.tree-item {
    padding: 16px 24px;
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    transition: background 0.2s;
}

.tree-item:hover {
    background: #f9f9f9;
}

.tree-item.selected {
    background: #f0fdf4;
    /* Light green tint */
    border-left: 4px solid #32cd32;
    /* Lime Green */
    padding-left: 20px;
}

.tree-info h3 {
    font-family: 'Roboto', sans-serif;
    font-size: 1rem;
    font-weight: 700;
    margin-bottom: 4px;
    color: #1a1a1a;
}

.tree-meta {
    font-size: 0.85rem;
    color: #666;
    display: flex;
    gap: 12px;
}

.tree-meta span.botanical {
    font-style: italic;
    color: #444;
}

.tree-dist {
    font-family: 'Roboto', sans-serif;
    font-weight: 500;
    font-size: 0.9rem;
    color: #16a34a;
}

/* Collect Button (Large Plus) */
.collect-btn {
    width: 48px;
    height: 48px;
    min-width: 48px;
    border: none;
    border-radius: 50%;
    background: #415a3c;
    color: #fff;
    font-size: 1.8rem;
    font-weight: 400;
    line-height: 1;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 16px;
    transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    box-shadow: 0 4px 12px rgba(65, 90, 60, 0.3);
}

.collect-btn:hover {
    background: #4a6b44;
    transform: scale(1.1);
    box-shadow: 0 6px 16px rgba(65, 90, 60, 0.4);
}

.collect-btn:active {
    background: #364c33;
    transform: scale(0.95);
}

/* Tab Bar */
.tab-bar {
    display: flex;
    padding: 0 16px;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    background: #fff;
}

.tab-btn {
    flex: 1;
    padding: 16px;
    background: none;
    border: none;
    font-family: 'Roboto', sans-serif;
    font-weight: 700;
    font-size: 0.9rem;
    color: #999;
    cursor: pointer;
    position: relative;
    transition: color 0.2s;
}

.tab-btn.active {
    color: #415a3c;
}

.tab-btn.active::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 3px;
    background: #415a3c;
}

/* Progress Bar */
.progress-bar-container {
    padding: 16px 24px 16px 24px;
    background: #fff;
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
}

.progress-info {
    display: flex;
    justify-content: space-between;
    font-size: 0.8rem;
    font-weight: 700;
    color: #555;
    margin-bottom: 8px;
    text-transform: uppercase;
}

.progress-track {
    width: 100%;
    height: 6px;
    background: rgba(0, 0, 0, 0.05);
    border-radius: 3px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: #415a3c;
    border-radius: 6px;
    transition: width 0.5s ease-out;
}

/* Progress Bar */
.progress-bar-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    transform: translateY(-100%);
    /* Move it above the shelf */
    padding: 16px 24px;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(5px);
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    border-radius: 20px 20px 0 0;
    /* Rounded top */
    z-index: 10;
}

/* When progress bar is active, we might want to flatten the shelf's top corners? 
   Actually, if the progress bar sits on top, the shelf's top corners are covered or below. 
   Let's keep it simple. */

.progress-info {
    display: flex;
    justify-content: space-between;
    font-size: 0.9rem;
    font-weight: 800;
    color: #333;
    margin-bottom: 10px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.progress-track {
    width: 100%;
    height: 12px;
    background: rgba(0, 0, 0, 0.1);
    border-radius: 6px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: #415a3c;
    border-radius: 6px;
    transition: width 0.5s ease-out;
}

/* Collection List Specifics */
/* Ensure it looks exactly like the radar list */
#collection-list .tree-item {
    background: transparent;
    opacity: 1;
}

#collection-list .tree-item.selected {
    background: #f0fdf4;
    border-left: 4px solid #32cd32;
    padding-left: 20px;
}

.empty-state {
    text-align: center;
    color: #999;
    font-weight: 500;
    margin-top: 40px;
}

/* MapLibre Controls Hidden */
.maplibregl-ctrl-bottom-right,
.maplibregl-ctrl-bottom-left {
    display: none !important;
}